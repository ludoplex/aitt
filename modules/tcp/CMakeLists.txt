SET(AITT_TCP aitt-transport-tcp)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

ADD_LIBRARY(TCP_OBJ OBJECT TCP.cc TCPServer.cc)
ADD_LIBRARY(${AITT_TCP} SHARED ../transport_entry.cc Module.cc $<TARGET_OBJECTS:TCP_OBJ>)
TARGET_LINK_LIBRARIES(${AITT_TCP} ${AITT_TCP_NEEDS_LIBRARIES} Threads::Threads ${AITT_COMMON})

INSTALL(TARGETS ${AITT_TCP} DESTINATION ${CMAKE_INSTALL_LIBDIR})

IF(BUILD_TESTING)
    ADD_SUBDIRECTORY(samples)
    ADD_SUBDIRECTORY(tests)
ENDIF(BUILD_TESTING)
